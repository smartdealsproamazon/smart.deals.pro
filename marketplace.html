<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Global Affiliate Marketplace - SmartDeals Pro</title>
  <meta name="description" content="Browse thousands of affiliate products from marketers worldwide. Find the best deals, compare prices, and discover new products from verified affiliates.">
  <meta name="keywords" content="affiliate marketplace, global products, affiliate deals, online shopping, affiliate network">
  <link rel="canonical" href="https://smartdealsproamazon.github.io/smart.deals.pro/marketplace.html">
  
  <!-- Enhanced Favicon Implementation -->
  <link rel="icon" type="image/x-icon" href="favicon.ico" sizes="16x16 32x32">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="192x192" href="favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="favicon-512x512.png">
  <link rel="icon" type="image/svg+xml" href="logo.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="logo.png">
  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#3b82f6">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Global Affiliate Marketplace - SmartDeals Pro">
  <meta property="og:description" content="Browse thousands of affiliate products from marketers worldwide.">
  <meta property="og:image" content="https://smartdealsproamazon.github.io/smart.deals.pro/logo.png">
  <meta property="og:url" content="https://smartdealsproamazon.github.io/smart.deals.pro/marketplace.html">
  <meta property="og:type" content="website">
  
  <!-- FontAwesome and Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="style.css" />
  
  <!-- Marketplace specific styles -->
  <style>
    .marketplace-hero {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 120px 0 60px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .marketplace-hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
      opacity: 0.3;
    }
    
    .marketplace-hero .container {
      position: relative;
      z-index: 1;
    }
    
    .marketplace-hero h1 {
      font-size: 3.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .marketplace-hero p {
      font-size: 1.25rem;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto 2rem;
      line-height: 1.6;
    }
    
    .marketplace-stats {
      display: flex;
      justify-content: center;
      gap: 4rem;
      margin-top: 3rem;
      flex-wrap: wrap;
    }
    
    .stat-item {
      text-align: center;
      padding: 1rem;
    }
    
    .stat-number {
      display: block;
      font-size: 3rem;
      font-weight: 700;
      color: #FFD700;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .stat-label {
      font-size: 1rem;
      opacity: 0.9;
      margin-top: 0.5rem;
    }
    
    .filters-section {
      background: white;
      padding: 2rem 0;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      position: sticky;
      top: 80px;
      z-index: 100;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .filters-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      align-items: end;
    }
    
    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .filter-label {
      font-size: 0.9rem;
      font-weight: 600;
      color: #374151;
    }
    
    .filter-select, .filter-input {
      padding: 0.75rem 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 1rem;
      background: white;
      transition: all 0.3s;
    }
    
    .filter-select:focus, .filter-input:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .products-section {
      padding: 4rem 0;
      background: #f8fafc;
      min-height: 60vh;
    }
    
    .section-header {
      text-align: center;
      margin-bottom: 3rem;
    }
    
    .section-header h2 {
      font-size: 2.5rem;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 1rem;
    }
    
    .section-header p {
      font-size: 1.125rem;
      color: #6b7280;
      max-width: 600px;
      margin: 0 auto;
    }
    
    .marketplace-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 2rem;
      margin-top: 3rem;
    }
    
    .affiliate-product-card {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
      position: relative;
      border: 1px solid #e5e7eb;
    }
    
    .affiliate-product-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }
    
    .product-image-container {
      position: relative;
      overflow: hidden;
    }
    
    .product-image {
      width: 100%;
      height: 220px;
      object-fit: cover;
      transition: transform 0.3s;
    }
    
    .affiliate-product-card:hover .product-image {
      transform: scale(1.05);
    }
    
    .product-content {
      padding: 1.5rem;
    }
    
    .product-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 0.75rem;
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .product-price {
      font-size: 1.75rem;
      font-weight: 700;
      color: #059669;
      margin-bottom: 1rem;
    }
    
    .product-badges {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }
    
    .badge {
      padding: 0.375rem 0.75rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .badge.platform {
      background: #3b82f6;
      color: white;
    }
    
    .badge.commission {
      background: #f59e0b;
      color: white;
    }
    
    .badge.featured {
      background: linear-gradient(45deg, #ff6b6b, #feca57);
      color: white;
      animation: pulse 2s infinite;
    }
    
    .badge.owner {
      background: linear-gradient(45deg, #FFD700, #FFA500);
      color: #000;
      font-weight: 700;
      box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
    }
    
    .badge.owner::before {
      content: "👑";
      margin-right: 0.25rem;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    .product-description {
      color: #6b7280;
      line-height: 1.6;
      margin-bottom: 1.5rem;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .affiliate-info {
      background: #f9fafb;
      padding: 1rem 1.5rem;
      border-top: 1px solid #e5e7eb;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .affiliate-name {
      font-size: 0.9rem;
      color: #6b7280;
      font-weight: 500;
    }
    
    .affiliate-rating {
      color: #fbbf24;
    }
    
    .product-cta {
      width: 100%;
      padding: 0.875rem 1.5rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .product-cta:hover {
      background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(103, 126, 234, 0.4);
    }

    /* Platform Card Styles */
    .platforms-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .platform-card {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
      cursor: pointer;
      border: 2px solid transparent;
      text-align: center;
    }

    .platform-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
      border-color: #667eea;
    }

    .platform-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 1.5rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      color: white;
    }

    .platform-name {
      font-size: 1.5rem;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 0.5rem;
    }

    .platform-description {
      color: #6b7280;
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    .platform-stats {
      display: flex;
      justify-content: space-around;
      margin-bottom: 1.5rem;
    }

    .platform-stat {
      text-align: center;
    }

    .platform-stat-number {
      display: block;
      font-size: 1.5rem;
      font-weight: 700;
      color: #667eea;
    }

    .platform-stat-label {
      font-size: 0.875rem;
      color: #6b7280;
    }

    .platform-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      background: #e0e7ff;
      color: #3730a3;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .back-to-platforms-btn {
      background: #6b7280;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 2rem;
    }

    .back-to-platforms-btn:hover {
      background: #4b5563;
      transform: translateY(-2px);
    }
    
    .load-more {
      text-align: center;
      margin-top: 4rem;
    }
    
    .load-more-btn {
      padding: 1rem 2.5rem;
      background: transparent;
      border: 2px solid #3b82f6;
      color: #3b82f6;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .load-more-btn:hover {
      background: #3b82f6;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
    }
    
    .cta-section {
      background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 100%);
      color: white;
      padding: 4rem 0;
      text-align: center;
    }
    
    .cta-content h2 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }
    
    .cta-content p {
      font-size: 1.25rem;
      opacity: 0.9;
      margin-bottom: 2rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .cta-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .btn {
      padding: 1rem 2rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .btn-primary {
      background: #fff;
      color: #1e3a8a;
    }
    
    .btn-secondary {
      background: transparent;
      color: white;
      border: 2px solid white;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    
    /* Mobile Responsive */
    @media (max-width: 768px) {
      .marketplace-hero {
        padding: 100px 0 40px;
      }
      
      .marketplace-hero h1 {
        font-size: 2.5rem;
      }
      
      .marketplace-stats {
        gap: 2rem;
      }
      
      .stat-number {
        font-size: 2rem;
      }
      
      .filters-container {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
      
      .marketplace-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }
      
      .filters-section {
        position: static;
      }
      
      .section-header h2 {
        font-size: 2rem;
      }
      
      .cta-content h2 {
        font-size: 2rem;
      }
      
      .cta-buttons {
        flex-direction: column;
        align-items: center;
      }
      
      .btn {
        width: 100%;
        max-width: 300px;
      }
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div id="loading-screen">
    <div class="preloader-container">
      <div class="old-loader"></div>
      <p class="old-loading-text">Loading marketplace...</p>
    </div>
  </div>

  <!-- Header -->
  <header class="main-header">
    <div class="container">
      <div class="header-content">
        <div class="header-left">
          <a href="index.html" class="logo-link">
            <img src="logo.svg?v=2024.1" alt="SmartDeals Pro Logo" class="logo" loading="eager" />
          </a>
          <div class="site-name">
            <span class="logo-text">SmartDeals Pro</span>
          </div>
        </div>
        
        <nav class="main-nav">
          <ul>
            <li><a href="index.html" class="nav-link">Home</a></li>
            <li><a href="marketplace.html" class="nav-link active">🛍️ Marketplace</a></li>
            <li class="dropdown">
              <a href="#" class="nav-link dropdown-toggle">For Affiliates <i class="fas fa-chevron-down"></i></a>
              <ul class="dropdown-menu">
                <li><a href="for-affiliates.html">🚀 Join Network</a></li>
                <li><a href="affiliate-register.html">📝 Register</a></li>
                <li><a href="affiliate-dashboard.html">📊 Dashboard</a></li>
                <li><a href="success-stories.html">🏆 Success Stories</a></li>
              </ul>
            </li>
            <li><a href="reviews.html" class="nav-link">Reviews</a></li>
            <li><a href="about.html" class="nav-link">About</a></li>
            <li><a href="contact.html" class="nav-link">Contact</a></li>
          </ul>
        </nav>

        <div class="header-right">
          <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-content">
      <button class="mobile-menu-close" onclick="toggleMobileMenu()">
        <i class="fas fa-times"></i>
      </button>
      <a href="index.html">Home</a>
      <a href="marketplace.html" class="active">🛍️ Marketplace</a>
      <a href="for-affiliates.html">🚀 Join Network</a>
      <a href="affiliate-register.html">📝 Register</a>
      <a href="affiliate-dashboard.html">📊 Dashboard</a>
      <a href="reviews.html">Reviews</a>
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
    </div>
  </div>

  <!-- Marketplace Hero Section -->
  <section class="marketplace-hero">
    <div class="container">
      <h1>🌍 Global Affiliate Marketplace</h1>
      <p>Discover thousands of products from verified affiliate marketers worldwide. Find the best deals, compare prices, and shop with confidence from our global community.</p>
      
      <div class="marketplace-stats">
        <div class="stat-item">
          <span class="stat-number">25,000+</span>
          <span class="stat-label">Products Listed</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">5,000+</span>
          <span class="stat-label">Global Affiliates</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">150+</span>
          <span class="stat-label">Countries</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">98%</span>
          <span class="stat-label">Satisfaction Rate</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Filters Section -->
  <section class="filters-section">
    <div class="container">
      <div class="filters-container">
        <div class="filter-group">
          <label class="filter-label">Category</label>
          <select class="filter-select" id="categoryFilter">
            <option value="">All Categories</option>
            <!-- Categories will be populated dynamically based on selected platform -->
          </select>
        </div>
        
        <div class="filter-group">
          <label class="filter-label">Platform</label>
          <select class="filter-select" id="platformFilter">
            <option value="">All Platforms</option>
            <option value="amazon">Amazon</option>
            <option value="clickbank">ClickBank</option>
            <option value="shareasale">ShareASale</option>
            <option value="cj">Commission Junction</option>
            <option value="rakuten">Rakuten</option>
            <option value="impact">Impact</option>
            <option value="shopify">Shopify Partners</option>
            <option value="etsy">Etsy</option>
            <option value="ebay">eBay Partner</option>
            <option value="other">Other Platforms</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label class="filter-label">Price Range</label>
          <select class="filter-select" id="priceFilter">
            <option value="">Any Price</option>
            <option value="0-25">$0 - $25</option>
            <option value="25-50">$25 - $50</option>
            <option value="50-100">$50 - $100</option>
            <option value="100-500">$100 - $500</option>
            <option value="500+">$500+</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label class="filter-label">Search Products</label>
          <input type="text" class="filter-input" id="searchInput" placeholder="Search products...">
        </div>
      </div>
    </div>
  </section>

  <!-- Platforms Section -->
  <section class="platforms-section">
    <div class="container">
      <div class="section-header">
        <h2>Shop by Platform</h2>
        <p>Browse products from your favorite affiliate networks and platforms</p>
      </div>
      
      <div class="platforms-grid" id="platformsGrid">
        <!-- Platform cards will be populated dynamically -->
      </div>
    </div>
  </section>

  <!-- All Products Section -->
  <section class="products-section" id="allProductsSection">
    <div class="container">
      <div class="section-header">
        <h2>All Products</h2>
        <p>Browse all products from our global affiliate network</p>
      </div>
      
      <div id="all-products-container" class="marketplace-grid">
        <!-- All products will be loaded here -->
      </div>
      
      <div class="load-more" id="allProductsLoadMore" style="display: none;">
        <button class="load-more-btn" onclick="loadMoreProducts()">
          Load More Products
        </button>
      </div>
    </div>
  </section>

  <!-- Platform Products Section (Hidden by default) -->
  <section class="platform-products-section" id="platformProductsSection" style="display: none;">
    <div class="container">
      <div class="section-header">
        <h2 id="platformProductsTitle">Platform Products</h2>
        <p id="platformProductsDescription">Browse products from this platform</p>
        <button class="back-to-platforms-btn" onclick="showPlatforms()">
          <i class="fas fa-arrow-left"></i> Back to Platforms
        </button>
      </div>
      
      <div id="platform-products-container" class="marketplace-grid">
        <!-- Platform-specific products will be loaded here -->
      </div>
      
      <div class="load-more" id="platformLoadMore" style="display: none;">
        <button class="load-more-btn" onclick="loadMorePlatformProducts()">
          Load More Products
        </button>
      </div>
    </div>
  </section>

  <!-- Call to Action Section -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-content">
        <h2>Ready to Join Our Global Network?</h2>
        <p>List your products, reach millions of shoppers worldwide, and grow your affiliate business with our powerful platform.</p>
        <div class="cta-buttons">
          <a href="affiliate-register.html" class="btn btn-primary">Join as Affiliate</a>
          <a href="for-affiliates.html" class="btn btn-secondary">Learn More</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="main-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>SmartDeals Pro</h3>
          <p>The world's largest affiliate marketplace connecting global marketers with millions of shoppers worldwide.</p>
        </div>
        <div class="footer-section">
          <h4>For Shoppers</h4>
          <ul>
            <li><a href="marketplace.html">Browse Products</a></li>
            <li><a href="reviews.html">Read Reviews</a></li>
            <li><a href="deals.html">Hot Deals</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>For Affiliates</h4>
          <ul>
            <li><a href="for-affiliates.html">Join Network</a></li>
            <li><a href="affiliate-register.html">Register</a></li>
            <li><a href="affiliate-dashboard.html">Dashboard</a></li>
            <li><a href="success-stories.html">Success Stories</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Legal</h4>
          <ul>
            <li><a href="privacy-policy.html">Privacy Policy</a></li>
            <li><a href="terms.html">Terms of Service</a></li>
            <li><a href="affiliate-disclosure.html">Affiliate Disclosure</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 SmartDeals Pro. All rights reserved.</p>
        <p class="affiliate-disclaimer">This site contains affiliate links. We may earn a commission when you purchase through links on our site.</p>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // Loading screen
    window.addEventListener('load', function() {
      setTimeout(() => {
        document.getElementById('loading-screen').style.opacity = '0';
        setTimeout(() => {
          document.getElementById('loading-screen').style.display = 'none';
        }, 500);
      }, 1000);
    });

    // Click tracking function
    function trackClick(productId, affiliateId) {
      console.log(`Tracking click: Product ${productId} by ${affiliateId}`);
      
      // Track click data
      const clickData = {
        productId: productId,
        affiliateId: affiliateId,
        timestamp: new Date().toISOString(),
        userAgent: navigator.userAgent,
        referrer: document.referrer
      };
      
      // In real implementation, send to Firebase/database
      localStorage.setItem('lastClick', JSON.stringify(clickData));
      
      // Show tracking message
      alert(`✅ Click tracked! Product: ${productId}\nAffiliate: ${affiliateId}\nRedirecting to product page...`);
      
      // In real implementation, redirect to actual affiliate link
      // window.open(affiliateLink, '_blank');
    }

    // Load more products function
    function loadMoreProducts() {
      const grid = document.getElementById('marketplaceGrid');
      const loadBtn = document.querySelector('.load-more-btn');
      
      loadBtn.textContent = 'Loading...';
      loadBtn.disabled = true;
      
      // Simulate loading
      setTimeout(() => {
        alert('🔄 Loading more products from database...\n\nIn real implementation, this would:\n• Fetch more products from Firebase\n• Add them to the grid\n• Update pagination');
        
        loadBtn.textContent = 'Load More Products';
        loadBtn.disabled = false;
      }, 1500);
    }

    // Filter functionality
    document.addEventListener('DOMContentLoaded', function() {
      const categoryFilter = document.getElementById('categoryFilter');
      const platformFilter = document.getElementById('platformFilter');
      const priceFilter = document.getElementById('priceFilter');
      const searchInput = document.getElementById('searchInput');

      function applyFilters() {
        const category = categoryFilter.value;
        const platform = platformFilter.value;
        const price = priceFilter.value;
        const search = searchInput.value.toLowerCase();

        console.log('Applying filters:', { category, platform, price, search });
        
        // If both platform and category are selected, navigate to new page with params
        if (platform && category) {
          window.location.href = `marketplace.html?platform=${encodeURIComponent(platform)}&category=${encodeURIComponent(category)}`;
          return;
        }
        
        // Filter products based on selected criteria
        if (window.products && window.products.length > 0) {
          let filteredProducts = window.products.filter(product => {
            // Platform filter
            if (platform && product.platform !== platform) {
              return false;
            }
            
            // Category filter
            if (category && product.category !== category) {
              return false;
            }
            
            // Search filter
            if (search) {
              const searchText = `${product.name} ${product.description} ${product.category}`.toLowerCase();
              if (!searchText.includes(search)) {
                return false;
              }
            }
            
            // Price filter
            if (price) {
              const productPrice = parseFloat(product.price.replace('$', '').replace(',', ''));
              const [minPrice, maxPrice] = price.split('-').map(p => p === '+' ? Infinity : parseFloat(p));
              
              if (price === '500+') {
                if (productPrice < 500) return false;
              } else if (maxPrice === Infinity) {
                if (productPrice < minPrice) return false;
              } else {
                if (productPrice < minPrice || productPrice > maxPrice) return false;
              }
            }
            
            return true;
          });
          
          // Render filtered products
          renderFilteredProducts(filteredProducts);
        }
      }

      // Render filtered products
      function renderFilteredProducts(products) {
        const container = document.getElementById('all-products-container');
        if (!container) return;
        
        container.innerHTML = '';
        
        if (products.length === 0) {
          container.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
              <i class="fas fa-search" style="font-size: 4rem; color: #9ca3af; margin-bottom: 1rem;"></i>
              <h3>No Products Found</h3>
              <p style="color: #6b7280;">No products match your current filters.</p>
              <button onclick="clearFilters()" style="margin-top: 1rem; padding: 0.75rem 1.5rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">
                Clear Filters
              </button>
            </div>
          `;
          return;
        }
        
        // Render each product
        products.forEach(product => {
          const productCard = createProductCard(product);
          container.appendChild(productCard);
        });
      }
      
      // Clear all filters
      function clearFilters() {
        document.getElementById('categoryFilter').value = '';
        document.getElementById('platformFilter').value = '';
        document.getElementById('priceFilter').value = '';
        document.getElementById('searchInput').value = '';
        
        // Reset to Amazon categories and default platform, then apply filters
        updateCategoriesForPlatform('amazon');
        document.getElementById('platformFilter').value = 'amazon';
        applyFilters();
      }
      
      categoryFilter.addEventListener('change', function() {
        const platform = platformFilter.value;
        const category = categoryFilter.value;
        if (platform && category) {
          window.location.href = `marketplace.html?platform=${encodeURIComponent(platform)}&category=${encodeURIComponent(category)}`;
          return;
        }
        applyFilters();
      });
      platformFilter.addEventListener('change', function() {
        const platform = platformFilter.value;
        const category = categoryFilter.value;
        // Update categories when platform changes
        updateCategoriesForPlatform(platform || 'amazon');
        if (platform && category) {
          window.location.href = `marketplace.html?platform=${encodeURIComponent(platform)}&category=${encodeURIComponent(category)}`;
          return;
        }
        if (platform) {
          window.location.href = `marketplace.html?platform=${encodeURIComponent(platform)}`;
          return;
        }
        applyFilters();
      });
      priceFilter.addEventListener('change', applyFilters);
      
      // Debounce search input
      let searchTimeout;
      searchInput.addEventListener('input', function() {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(applyFilters, 500);
      });
      
      // Set default platform to Amazon on load and apply filters immediately (if no URL params)
      platformFilter.value = 'amazon';
      updateCategoriesForPlatform('amazon');
      
      // On load, read URL params and show appropriate view
      const params = new URLSearchParams(window.location.search);
      const urlPlatform = params.get('platform');
      const urlCategory = params.get('category');
      if (urlPlatform) {
        platformFilter.value = urlPlatform;
        updateCategoriesForPlatform(urlPlatform);
        if (urlCategory) {
          // Set category if provided
          const catEl = document.getElementById('categoryFilter');
          if (catEl) catEl.value = urlCategory;
        }
        // Show platform-specific products view
        showPlatformProducts(urlPlatform);
      } else {
        applyFilters();
      }
    });
    
    // Mobile menu toggle
    function toggleMobileMenu() {
      const mobileMenu = document.getElementById('mobileMenu');
      if (mobileMenu) {
        mobileMenu.classList.toggle('active');
      }
    }
    
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });
  </script>
  <script src="products.js"></script>
  <script src="render.js"></script>
  <script>
    // Platform data with icons and descriptions
    const platformsData = {
      'amazon': {
        name: 'Amazon',
        icon: '📦',
        description: 'World\'s largest online marketplace with millions of products',
        badge: 'Most Popular',
        categories: ['electronics', 'fashion', 'home', 'health', 'sports', 'books', 'software', 'business', 'toys', 'automotive', 'garden', 'kitchen', 'beauty', 'fitness', 'baby', 'pet', 'office', 'tools', 'jewelry', 'watches']
      },
      'clickbank': {
        name: 'ClickBank',
        icon: '💳',
        description: 'Digital products and online courses marketplace',
        badge: 'High Commission',
        categories: ['software', 'business', 'health', 'fitness', 'education', 'marketing', 'self-help', 'cooking', 'parenting', 'relationships', 'spirituality', 'finance', 'investing', 'weight-loss', 'muscle-building', 'meditation', 'yoga', 'diet', 'supplements', 'courses']
      },
      'shareasale': {
        name: 'ShareASale',
        icon: '🤝',
        description: 'Affiliate network with diverse merchant partnerships',
        badge: 'Trusted Network',
        categories: ['fashion', 'home', 'health', 'beauty', 'jewelry', 'accessories', 'shoes', 'bags', 'clothing', 'dresses', 'shirts', 'pants', 'skirts', 'jackets', 'coats', 'swimwear', 'lingerie', 'maternity', 'kids', 'mens', 'womens']
      },
      'cj': {
        name: 'Commission Junction',
        icon: '🔗',
        description: 'Global affiliate marketing network by CJ Affiliate',
        badge: 'Enterprise',
        categories: ['electronics', 'fashion', 'home', 'health', 'sports', 'books', 'software', 'business', 'travel', 'hotels', 'flights', 'vacations', 'insurance', 'banking', 'credit-cards', 'loans', 'mortgages', 'investing', 'real-estate', 'services']
      },
      'rakuten': {
        name: 'Rakuten',
        icon: '🛍️',
        description: 'Cashback and affiliate marketing platform',
        badge: 'Cashback',
        categories: ['electronics', 'fashion', 'home', 'health', 'sports', 'books', 'software', 'business', 'travel', 'hotels', 'flights', 'vacations', 'insurance', 'banking', 'credit-cards', 'loans', 'mortgages', 'investing', 'real-estate', 'services']
      },
      'impact': {
        name: 'Impact',
        icon: '⚡',
        description: 'Partnership automation platform for brands',
        badge: 'Automation',
        categories: ['software', 'business', 'marketing', 'analytics', 'automation', 'crm', 'email-marketing', 'social-media', 'seo', 'ppc', 'content-marketing', 'influencer-marketing', 'affiliate-marketing', 'ecommerce', 'saas', 'tools', 'platforms', 'integrations', 'api', 'webhooks', 'reporting']
      },
      'shopify': {
        name: 'Shopify Partners',
        icon: '🏪',
        description: 'E-commerce platform with partner program',
        badge: 'E-commerce',
        categories: ['software', 'business', 'ecommerce', 'themes', 'apps', 'plugins', 'tools', 'marketing', 'analytics', 'payment', 'shipping', 'inventory', 'crm', 'email-marketing', 'social-media', 'seo', 'ppc', 'content-marketing', 'influencer-marketing', 'affiliate-marketing']
      },
      'etsy': {
        name: 'Etsy',
        icon: '🎨',
        description: 'Handmade and creative products marketplace',
        badge: 'Handmade',
        categories: ['handmade', 'vintage', 'art', 'crafts', 'jewelry', 'clothing', 'accessories', 'home', 'decor', 'furniture', 'kitchen', 'garden', 'wedding', 'party', 'kids', 'toys', 'books', 'music', 'collectibles', 'supplies', 'tools']
      },
      'ebay': {
        name: 'eBay Partner',
        icon: '🏷️',
        description: 'Global online auction and marketplace',
        badge: 'Auctions',
        categories: ['electronics', 'fashion', 'home', 'health', 'sports', 'books', 'software', 'business', 'collectibles', 'antiques', 'vintage', 'art', 'coins', 'stamps', 'cards', 'toys', 'automotive', 'parts', 'accessories', 'tools']
      },
      'other': {
        name: 'Other Platforms',
        icon: '🌐',
        description: 'Various other affiliate networks and platforms',
        badge: 'Mixed',
        categories: ['electronics', 'fashion', 'home', 'health', 'sports', 'books', 'software', 'business', 'travel', 'food', 'drinks', 'entertainment', 'gaming', 'music', 'movies', 'tv', 'streaming', 'subscriptions', 'services', 'utilities']
      }
    };

    // Current state
    let currentPlatform = null;
    let platformProducts = [];

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      renderPlatforms();
      setupPlatformFilter();
      
      // If a platform is selected (default Amazon), apply filters; otherwise render all
      const platformFilterEl = document.getElementById('platformFilter');
      if (platformFilterEl && platformFilterEl.value) {
        platformFilterEl.dispatchEvent(new Event('change'));
      } else {
        renderAllProducts();
      }
      
      // Listen for product updates
      document.addEventListener('products-ready', function() {
        renderPlatforms();
        setupPlatformFilter();
        const platformFilterEl = document.getElementById('platformFilter');
        if (platformFilterEl && platformFilterEl.value) {
          platformFilterEl.dispatchEvent(new Event('change'));
        } else {
          renderAllProducts();
        }
      });
      document.addEventListener('products-updated', function() {
        renderPlatforms();
        setupPlatformFilter();
        const platformFilterEl = document.getElementById('platformFilter');
        if (platformFilterEl && platformFilterEl.value) {
          platformFilterEl.dispatchEvent(new Event('change'));
        } else {
          renderAllProducts();
        }
      });
    });

    // Render all products
    function renderAllProducts() {
      const container = document.getElementById('all-products-container');
      if (!container || !window.products) return;
      
      container.innerHTML = '';
      
      if (window.products.length === 0) {
        container.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
            <i class="fas fa-box-open" style="font-size: 4rem; color: #9ca3af; margin-bottom: 1rem;"></i>
            <h3>No Products Available</h3>
            <p style="color: #6b7280;">Products will appear here once affiliates start submitting them.</p>
          </div>
        `;
        return;
      }
      
      // Render each product
      window.products.forEach(product => {
        const productCard = createProductCard(product);
        container.appendChild(productCard);
      });
    }

    // Setup platform filter to update categories
    function setupPlatformFilter() {
      const platformFilter = document.getElementById('platformFilter');
      const categoryFilter = document.getElementById('categoryFilter');
      
      if (platformFilter && categoryFilter) {
        platformFilter.addEventListener('change', function() {
          updateCategoriesForPlatform(this.value);
        });
        
        // Initialize with Amazon categories (default)
        updateCategoriesForPlatform('amazon');
      }
    }

    // Update categories based on selected platform
    function updateCategoriesForPlatform(platformKey) {
      const categoryFilter = document.getElementById('categoryFilter');
      if (!categoryFilter) return;
      
      // Clear existing options except "All Categories"
      categoryFilter.innerHTML = '<option value="">All Categories</option>';
      
      if (platformKey && platformsData[platformKey]) {
        const categories = platformsData[platformKey].categories;
        categories.forEach(category => {
          const option = document.createElement('option');
          option.value = category;
          option.textContent = formatCategoryName(category);
          categoryFilter.appendChild(option);
        });
      }
    }

    // Format category name for display
    function formatCategoryName(category) {
      return category
        .split('-')
        .map(word => word.charAt(0).toUpperCase() + word.slice(1))
        .join(' ');
    }

    // Render platform cards
    function renderPlatforms() {
      const container = document.getElementById('platformsGrid');
      if (!container) return;

      // Get available platforms from products
      const availablePlatforms = getAvailablePlatforms();
      
      container.innerHTML = '';

      Object.keys(platformsData).forEach(platformKey => {
        const platform = platformsData[platformKey];
        const productCount = availablePlatforms[platformKey] || 0;
        
        // Only show platforms that have products
        if (productCount > 0) {
          const platformCard = createPlatformCard(platformKey, platform, productCount);
          container.appendChild(platformCard);
        }
      });

      // If no platforms have products, show a message
      if (Object.keys(availablePlatforms).length === 0) {
        container.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
            <i class="fas fa-store" style="font-size: 4rem; color: #9ca3af; margin-bottom: 1rem;"></i>
            <h3>No Platforms Available Yet</h3>
            <p style="color: #6b7280;">Products will appear here once affiliates start submitting them.</p>
            <a href="product-submission.html" style="color: #667eea; text-decoration: underline;">Submit your first product</a>
          </div>
        `;
      }
    }

    // Get available platforms from products
    function getAvailablePlatforms() {
      if (!window.products || window.products.length === 0) {
        return {};
      }

      const platformCounts = {};
      window.products.forEach(product => {
        const platform = product.platform || 'other';
        platformCounts[platform] = (platformCounts[platform] || 0) + 1;
      });

      return platformCounts;
    }

    // Create platform card
    function createPlatformCard(platformKey, platform, productCount) {
      const card = document.createElement('div');
      card.className = 'platform-card';
      card.onclick = () => showPlatformProducts(platformKey);

      card.innerHTML = `
        <div class="platform-badge">${platform.badge}</div>
        <div class="platform-icon">${platform.icon}</div>
        <h3 class="platform-name">${platform.name}</h3>
        <p class="platform-description">${platform.description}</p>
        <div class="platform-stats">
          <div class="platform-stat">
            <span class="platform-stat-number">${productCount}</span>
            <span class="platform-stat-label">Products</span>
          </div>
          <div class="platform-stat">
            <span class="platform-stat-number">4.8</span>
            <span class="platform-stat-label">Rating</span>
          </div>
        </div>
      `;

      return card;
    }

    // Show products for a specific platform
    function showPlatformProducts(platformKey) {
      currentPlatform = platformKey;
      const platform = platformsData[platformKey];
      
      // Update title and description
      document.getElementById('platformProductsTitle').textContent = `${platform.name} Products`;
      document.getElementById('platformProductsDescription').textContent = `Browse all products from ${platform.name}`;
      
      // Hide platforms section and all products section, show platform products section
      document.querySelector('.platforms-section').style.display = 'none';
      document.getElementById('allProductsSection').style.display = 'none';
      document.getElementById('platformProductsSection').style.display = 'block';
      
      // Filter and render products for this platform
      renderPlatformProducts(platformKey);
      
      // Scroll to products section
      document.getElementById('platformProductsSection').scrollIntoView({ behavior: 'smooth' });
    }

    // Render products for specific platform
    function renderPlatformProducts(platformKey) {
      const container = document.getElementById('platform-products-container');
      if (!container) return;

      // Filter products by platform
      const products = window.products ? window.products.filter(p => (p.platform || 'other') === platformKey) : [];
      
      // Further filter by category if provided via URL
      const params = new URLSearchParams(window.location.search);
      const urlCategory = params.get('category');
      const finalProducts = urlCategory ? products.filter(p => p.category === urlCategory) : products;
      
      container.innerHTML = '';

      if (finalProducts.length === 0) {
        container.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
            <i class="fas fa-box-open" style="font-size: 4rem; color: #9ca3af; margin-bottom: 1rem;"></i>
            <h3>No Products Found</h3>
            <p style="color: #6b7280;">No products available for this platform${urlCategory ? ' and category' : ''} yet.</p>
            <button onclick="showPlatforms()" style="margin-top: 1rem; padding: 0.75rem 1.5rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">
              Back to Platforms
            </button>
          </div>
        `;
        return;
      }

      // Render each product
      finalProducts.forEach(product => {
        const productCard = createProductCard(product);
        container.appendChild(productCard);
      });
    }

    // Go back to platforms view
    function showPlatforms() {
      document.querySelector('.platforms-section').style.display = 'block';
      document.getElementById('allProductsSection').style.display = 'block';
      document.getElementById('platformProductsSection').style.display = 'none';
      currentPlatform = null;
      
      // Scroll to platforms section
      document.querySelector('.platforms-section').scrollIntoView({ behavior: 'smooth' });
    }

    // Load more platform products (placeholder)
    function loadMorePlatformProducts() {
      alert('Load more functionality would be implemented here');
    }

    // Create product card element
    function createProductCard(product) {
      const card = document.createElement('div');
      card.className = 'affiliate-product-card';
      
      // Format price
      const displayPrice = product.price || '$0.00';
      const displayOriginalPrice = product.originalPrice || product.price || '$0.00';
      const originalPriceHTML = displayOriginalPrice !== displayPrice && 
                               !displayOriginalPrice.includes('$0.00') ? 
        `<span style="text-decoration: line-through; color: #9ca3af; font-size: 1rem; margin-left: 0.5rem;">${displayOriginalPrice}</span>` : '';
      
      // Create badges
      const badges = [];
      
      // Platform badge
      if (product.platform) {
        const platformName = platformsData[product.platform] ? platformsData[product.platform].name : product.platform;
        badges.push(`<span class="badge platform">${platformName}</span>`);
      } else {
        badges.push(`<span class="badge platform">Amazon</span>`);
      }
      
      // Category badge
      if (product.category) {
        badges.push(`<span class="badge commission">${formatCategoryName(product.category)}</span>`);
      }
      
      // Discount badge
      if (product.discount && product.discount > 0) {
        badges.push(`<span class="badge featured">${product.discount}% OFF</span>`);
      }
      
      // Rating badge if high rating
      if (product.rating && product.rating >= 4.5) {
        badges.push(`<span class="badge featured">⭐ Top Rated</span>`);
      }
      
      const badgesHTML = badges.length > 0 ? 
        `<div class="product-badges">${badges.join('')}</div>` : '';
      
      // Create description
      let description = product.description || '';
      if (!description && Array.isArray(product.features) && product.features.length > 0) {
        description = product.features.slice(0, 2).join('. ') + '.';
      }
      if (!description) {
        description = `High-quality ${product.category || 'product'} with excellent features and great value for money.`;
      }
      
      // Make the entire card clickable
      card.style.cursor = 'pointer';
      card.addEventListener('click', function(e) {
        if (e.target.closest('a, button')) {
          return;
        }
        if (product && product.id) {
          const currentPage = window.location.pathname.split('/').pop() || 'index.html';
          const productId = encodeURIComponent(String(product.id));
          const scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
          localStorage.setItem('scrollPosition_' + currentPage, scrollPosition.toString());
          window.location.href = `product-detail.html?id=${productId}&ref=${encodeURIComponent(currentPage)}`;
        }
      });

      card.innerHTML = `
        <div class="product-image-container">
          <img src="${product.image}" alt="${product.name}" class="product-image" loading="lazy">
        </div>
        <div class="product-content">
          <h3 class="product-title">${product.name}</h3>
          <div class="product-price">${displayPrice}${originalPriceHTML}</div>
          ${badgesHTML}
          <p class="product-description">${description}</p>
          <button class="product-cta" onclick="event.stopPropagation(); trackClick('${product.name}', '${product.category}'); window.open('${product.link}', '_blank')">
            🛒 Buy Now - ${displayPrice}
          </button>
        </div>
      `;
      
      return card;
    }
  </script>
  <script src="scroll-restoration.js"></script>
  <script src="smart-deals-integration.js"></script>
  <script src="cloud-sync.js"></script>
  <script src="user-auth.js"></script>
</body>
</html>