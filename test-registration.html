<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        button { padding: 10px 20px; margin: 5px; }
    </style>
</head>
<body>
    <h1>üîç Registration Form Test</h1>
    
    <div class="test-section">
        <h3>1. Check if affiliate-register.html exists</h3>
        <button onclick="checkFileExists()">Check File</button>
        <div id="fileCheckResult"></div>
    </div>
    
    <div class="test-section">
        <h3>2. Test Firebase Service</h3>
        <button onclick="testFirebaseService()">Test Firebase</button>
        <div id="firebaseTestResult"></div>
    </div>
    
    <div class="test-section">
        <h3>3. Test Registration Form</h3>
        <button onclick="testRegistrationForm()">Test Form</button>
        <div id="formTestResult"></div>
    </div>
    
    <div class="test-section">
        <h3>4. Open Registration Page</h3>
        <button onclick="openRegistrationPage()">Open affiliate-register.html</button>
        <div id="openResult"></div>
    </div>

    <script>
        async function checkFileExists() {
            const resultDiv = document.getElementById('fileCheckResult');
            try {
                const response = await fetch('affiliate-register.html');
                if (response.ok) {
                    resultDiv.innerHTML = '<div class="success">‚úÖ File exists and is accessible</div>';
                } else {
                    resultDiv.innerHTML = '<div class="error">‚ùå File exists but not accessible (Status: ' + response.status + ')</div>';
                }
            } catch (error) {
                resultDiv.innerHTML = '<div class="error">‚ùå Error accessing file: ' + error.message + '</div>';
            }
        }
        
        async function testFirebaseService() {
            const resultDiv = document.getElementById('firebaseTestResult');
            resultDiv.innerHTML = '<div class="info">üîÑ Testing Firebase service...</div>';
            
            try {
                // Check if Firebase scripts are loaded
                if (typeof firebase === 'undefined') {
                    resultDiv.innerHTML = '<div class="error">‚ùå Firebase not loaded. Loading scripts...</div>';
                    
                    // Load Firebase scripts
                    const firebaseAppScript = document.createElement('script');
                    firebaseAppScript.src = 'https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js';
                    document.head.appendChild(firebaseAppScript);
                    
                    const firebaseFirestoreScript = document.createElement('script');
                    firebaseFirestoreScript.src = 'https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js';
                    document.head.appendChild(firebaseFirestoreScript);
                    
                    // Wait for scripts to load
                    await new Promise(resolve => setTimeout(resolve, 2000));
                }
                
                if (typeof firebase !== 'undefined') {
                    resultDiv.innerHTML = '<div class="success">‚úÖ Firebase is loaded</div>';
                } else {
                    resultDiv.innerHTML = '<div class="error">‚ùå Firebase failed to load</div>';
                }
            } catch (error) {
                resultDiv.innerHTML = '<div class="error">‚ùå Firebase test failed: ' + error.message + '</div>';
            }
        }
        
        async function testRegistrationForm() {
            const resultDiv = document.getElementById('formTestResult');
            resultDiv.innerHTML = '<div class="info">üîÑ Testing registration form...</div>';
            
            try {
                const response = await fetch('affiliate-register.html');
                const html = await response.text();
                
                // Check for key elements
                const hasForm = html.includes('id="registrationForm"');
                const hasSubmitButton = html.includes('id="submitBtn"');
                const hasFirebaseScripts = html.includes('firebase-app-compat.js');
                
                if (hasForm && hasSubmitButton && hasFirebaseScripts) {
                    resultDiv.innerHTML = '<div class="success">‚úÖ Registration form structure is correct</div>';
                } else {
                    resultDiv.innerHTML = '<div class="error">‚ùå Registration form has missing elements</div>';
                }
            } catch (error) {
                resultDiv.innerHTML = '<div class="error">‚ùå Form test failed: ' + error.message + '</div>';
            }
        }
        
        function openRegistrationPage() {
            const resultDiv = document.getElementById('openResult');
            try {
                window.open('affiliate-register.html', '_blank');
                resultDiv.innerHTML = '<div class="success">‚úÖ Registration page opened in new tab</div>';
            } catch (error) {
                resultDiv.innerHTML = '<div class="error">‚ùå Failed to open page: ' + error.message + '</div>';
            }
        }
        
        // Auto-run tests on page load
        window.addEventListener('load', function() {
            setTimeout(() => {
                checkFileExists();
                testFirebaseService();
                testRegistrationForm();
            }, 1000);
        });
    </script>
</body>
</html>